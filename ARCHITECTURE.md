# Архитектура приложения Bailanysta

## Диаграмма MVP архитектуры

```
┌─────────────────────────────────────────────────────────────────┐
│                        BAILANYSTA APP                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐    ┌──────────────┐    ┌─────────────┐       │
│  │    VIEW     │◄──►│  PRESENTER   │◄──►│    MODEL    │       │
│  │ (SwiftUI)   │    │ (Business    │    │ (Data)      │       │
│  │             │    │  Logic)      │    │             │       │
│  └─────────────┘    └──────────────┘    └─────────────┘       │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                           VIEWS                                 │
├─────────────────────────────────────────────────────────────────┤
│  • FeedView          - Лента постов                            │
│  • ProfileView       - Профиль пользователя                    │
│  • MainTabView       - Главная навигация                       │
│  • PostCardView      - Карточка поста                          │
│  • CommentView       - Комментарий                             │
│  • SettingsView      - Настройки                               │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                         PRESENTERS                             │
├─────────────────────────────────────────────────────────────────┤
│  • FeedPresenter     - Управление лентой постов                │
│  • ProfilePresenter  - Управление профилем                     │
│                                                                 │
│  Протоколы:                                                     │
│  • FeedPresenterProtocol                                        │
│  • ProfilePresenterProtocol                                     │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                          MODELS                                 │
├─────────────────────────────────────────────────────────────────┤
│  • User             - Пользователь                             │
│  • Post             - Пост                                     │
│  • Comment          - Комментарий                              │
│                                                                 │
│  Sample Data:                                                   │
│  • User.sampleUsers - Тестовые пользователи                    │
│  • Post.samplePosts - Тестовые посты                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Поток данных

```
1. User Interaction
   ↓
2. View (SwiftUI)
   ↓
3. Presenter (Business Logic)
   ↓
4. Model (Data Update)
   ↓
5. @Published Properties
   ↓
6. View Update (Automatic)
```

## Ключевые принципы

### 1. Разделение ответственности
- **View**: Только отображение и пользовательский ввод
- **Presenter**: Вся бизнес-логика и управление состоянием
- **Model**: Структуры данных и их валидация

### 2. Реактивное программирование
- `@Published` для автоматического обновления UI
- `@StateObject` для инициализации Presenter'ов
- `@ObservedObject` для связи View с Presenter

### 3. Протоколы и интерфейсы
- Четкие контракты между слоями
- Легкое тестирование и мокирование
- Возможность замены реализации

### 4. Модульность
- Каждый экран имеет свой Presenter
- Переиспользуемые компоненты
- Четкая структура файлов

## Преимущества выбранной архитектуры

1. **Простота** - Легко понять и поддерживать
2. **Тестируемость** - Presenter'ы легко тестировать
3. **Масштабируемость** - Легко добавлять новые функции
4. **SwiftUI совместимость** - Идеально подходит для SwiftUI
5. **Отсутствие зависимостей** - Чистый Swift код
